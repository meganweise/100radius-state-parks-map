<!DOCTYPE html>
<html>
<head>
  <title>State Parks Within 100 Miles of Memphis, TN</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    #map { height: 90vh; width: 100vw; }
    body { margin:0; }
    /* --- Pulse Animation CSS --- */
    .pulse-marker {
      position: relative;
      width: 32px;
      height: 32px;
      background: transparent;
    }
    .pulse-marker .dot {
      width: 16px;
      height: 16px;
      left: 8px;
      top: 8px;
      background: #3788e3;
      border-radius: 50%;
      position: absolute;
      box-shadow: 0 0 10px #3788e3;
      opacity: 0;
      transition: opacity 0.4s, transform 0.4s;
      transform: scale(0);
    }
    .pulse-marker .pulse {
      width: 32px;
      height: 32px;
      left: 0;
      top: 0;
      background: rgba(55, 136, 227, 0.3);
      border-radius: 50%;
      position: absolute;
      animation: pulse 1.2s infinite;
      opacity: 0;
      transition: opacity 0.4s;
    }
    @keyframes pulse {
      0% { transform: scale(0.8); opacity: 0.7; }
      70% { transform: scale(2); opacity: 0; }
      100% { transform: scale(2); opacity: 0; }
    }
    .pulse-marker.visible .dot {
      opacity: 1;
      transform: scale(1.3);
      transition: opacity 0.4s, transform 0.3s cubic-bezier(.68,-0.55,.27,1.55);
    }
    .pulse-marker.visible .pulse {
      opacity: 1;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    // Fix for GitHub Pages marker icon path (for Memphis marker)
    L.Icon.Default.mergeOptions({
      iconRetinaUrl: 'https://unpkg.com/leaflet/dist/images/marker-icon-2x.png',
      iconUrl: 'https://unpkg.com/leaflet/dist/images/marker-icon.png',
      shadowUrl: 'https://unpkg.com/leaflet/dist/images/marker-shadow.png',
    });

    const center = [35.1495, -90.0490];
    const parks = [
      {name: "T.O. Fuller State Park", lat: 35.0348, lon: -90.0935},
      {name: "Meeman-Shelby Forest State Park", lat: 35.3451, lon: -90.0598},
      {name: "Fort Pillow State Historic Park", lat: 35.6586, lon: -89.7444},
      {name: "Big Hill Pond State Park", lat: 35.0522, lon: -88.8632},
      {name: "Chickasaw State Park", lat: 35.4222, lon: -88.7794},
      {name: "Pinson Mounds State Archaeological Park", lat: 35.4773, lon: -88.6843},
      {name: "Reelfoot Lake State Park", lat: 36.3693, lon: -89.3279},
      {name: "Hampson Archeological Museum State Park", lat: 35.7000, lon: -90.1444},
      {name: "Parkin Archeological State Park", lat: 35.2664, lon: -90.5614},
      {name: "Village Creek State Park", lat: 35.2170, lon: -90.7531},
      {name: "Mississippi River State Park", lat: 34.6527, lon: -90.0421},
      {name: "Herman Davis State Park", lat: 35.8465, lon: -90.1096},
      {name: "Crowley’s Ridge State Park", lat: 35.6012, lon: -90.6791},
      {name: "Lake Frierson State Park", lat: 35.9857, lon: -90.7410},
      {name: "Lake Poinsett State Park", lat: 35.8675, lon: -90.6819},
      {name: "Lake Charles State Park", lat: 36.0753, lon: -91.0734},
      {name: "Delta Heritage Trail State Park (Barton/Lexa)", lat: 34.5591, lon: -90.7633},
      {name: "Louisiana Purchase State Park", lat: 34.7616, lon: -91.0737},
      {name: "Jacksonport State Park", lat: 35.6462, lon: -91.3318},
      {name: "Wall Doxey State Park", lat: 34.6242, lon: -89.4273},
      {name: "John W. Kyle State Park", lat: 34.3609, lon: -89.5087},
      {name: "George P. Cossar State Park", lat: 33.9440, lon: -89.8081},
      {name: "Hugh White State Park", lat: 33.5504, lon: -89.7881},
      {name: "Trace State Park", lat: 34.1377, lon: -88.8804},
      {name: "Tombigbee State Park", lat: 34.1935, lon: -88.6862}
    ];

    // Initialize map
    const map = L.map('map').setView(center, 8);

    // Add tile layer
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 18,
      attribution: '© OpenStreetMap contributors'
    }).addTo(map);

    // Memphis marker
    L.marker(center).addTo(map).bindPopup("<b>Memphis, TN (You are here)</b>");

    // 100 mi radius circle
    L.circle(center, {
      color: 'blue',
      fillColor: '#cadfff',
      fillOpacity: 0.2,
      radius: 160934 // meters (100 mi)
    }).addTo(map).bindPopup('100 mile radius');

    // Custom pulsing icon
    const PulseIcon = L.DivIcon.extend({
      options: {
        className: '',
        iconSize: [32, 32],
        iconAnchor: [16, 16], // anchor at center of icon
        popupAnchor: [0, -10]
      },
      createIcon: function() {
        const div = document.createElement('div');
        div.className = 'pulse-marker';
        div.innerHTML = '<div class="pulse"></div><div class="dot"></div>';
        return div;
      }
    });

    // Animate markers in sequence, with pulse
    function animatePulseMarkers(parks, delay = 200) {
      parks.forEach((park, i) => {
        setTimeout(() => {
          const marker = L.marker([park.lat, park.lon], {
            icon: new PulseIcon()
          }).addTo(map).bindPopup(`<b>${park.name}</b>`);
          // Animate in
          setTimeout(() => {
            const iconDiv = marker.getElement();
            if (iconDiv) iconDiv.classList.add('visible');
          }, 50);
        }, i * delay);
      });
    }

    animatePulseMarkers(parks, 200); // 200ms between points

  </script>
</body>
</html>
